
{{> header }}

<h1>{{logged_user.name}} {{logged_user.lastname}} messages</h1>

{{> show_flash_messages }}

{{# if_or logged_user.admin logged_user.approver }}
  <div class="row main-row_header">
    <p class="col-md-12">Leave request to approve</p>
  </div>

  <div class="row">
    {{# unless to_be_approved_leaves}}
    <div class="col-md-12 text-muted">
      There are no leave request to decide on.
    </div>
    {{else}}
    <div class="col-md-12">
      <p class="visible-xs-block"><em class="text-muted">Scroll table horizontally</em></p>
      <div class="table-responsive">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>Employee</th>
            <th>Department</th>
            <th>Date of request</th>
            <th>Leave dates</th>
            <th>Type</th>
            <th>Days</th>
            <th colspan="2"></th>
          </tr>
        </thead>
        <tbody>
          {{#each to_be_approved_leaves }}
          <tr vpp="pending_for__{{this.user.email}}">
            <td>{{this.full_name}}</td>
            <td>{{this.user.department.name}}</td>
            <td>{{as_date this.created_at}}</td>
            <td>From {{this.start_date}} to {{this.leave_date}}</td>
            <td>{{#if this.leaveObject.is_pended_revoke_leave}}REVOKE {{/if}}{{this.leaveObject.leave_type.name}}</td>
            <td>{{this.days}}</td>
            <td>
              <form action="/requests/reject/" method="POST">
              <input class="btn btn-warning" type="submit" value="Reject">
              <input type="hidden" value="{{this.id}}" name="request">
              </form>
            </td>
            <td>
              <form action="/requests/approve/" method="POST">
              <input class="btn btn-success" type="submit" value="Approve">
              <input type="hidden" value="{{this.id}}" name="request">
              </form>
            </td>
          </tr>
          {{/each}}
        </tbody>
      </table>
      </div>
    </div>
    {{/unless}}
  </div>
{{/if_or}}

{{> user_requests leaves=my_leaves }}

{{>footer}}
